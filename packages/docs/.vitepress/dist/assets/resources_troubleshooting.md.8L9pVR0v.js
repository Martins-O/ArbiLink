import{_ as a,o as e,c as n,ag as o}from"./chunks/framework.DEqXEGcv.js";const b=JSON.parse('{"title":"Troubleshooting","description":"","frontmatter":{},"headers":[],"relativePath":"resources/troubleshooting.md","filePath":"resources/troubleshooting.md"}'),r={name:"resources/troubleshooting.md"};function t(l,s,p,i,c,d){return e(),n("div",null,[...s[0]||(s[0]=[o(`<h1 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h1><h2 id="sdk-errors" tabindex="-1">SDK Errors <a class="header-anchor" href="#sdk-errors" aria-label="Permalink to &quot;SDK Errors&quot;">​</a></h2><h3 id="not-connected-—-write-method-called-without-a-signer" tabindex="-1"><code>NOT_CONNECTED</code> — Write method called without a Signer <a class="header-anchor" href="#not-connected-—-write-method-called-without-a-signer" aria-label="Permalink to &quot;\`NOT_CONNECTED\` — Write method called without a Signer&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>ArbiLinkError [NOT_CONNECTED]: A Signer is required for this operation</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Fix:</strong> Create <code>ArbiLink</code> with a Signer, not a Provider:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ❌ Wrong — read-only</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> arbiLink</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> ArbiLink</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> JsonRpcProvider</span><span style="color:#E1E4E8;">(rpc));</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> arbiLink.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// throws NOT_CONNECTED</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ✅ Correct — has signer</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> signer</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> provider.</span><span style="color:#B392F0;">getSigner</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> arbiLink</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> ArbiLink</span><span style="color:#E1E4E8;">(signer);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h3 id="chain-not-supported-—-unsupported-destination-chain" tabindex="-1"><code>CHAIN_NOT_SUPPORTED</code> — Unsupported destination chain <a class="header-anchor" href="#chain-not-supported-—-unsupported-destination-chain" aria-label="Permalink to &quot;\`CHAIN_NOT_SUPPORTED\` — Unsupported destination chain&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>ArbiLinkError [CHAIN_NOT_SUPPORTED]: Chain 1 is not registered in MessageHub</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Fix:</strong> Use a supported chain ID. Check <code>SUPPORTED_CHAINS</code>:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { SUPPORTED_CHAINS } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@arbilink/sdk&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">SUPPORTED_CHAINS</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">c</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> c.chainId));</span></span>
<span class="line"><span style="color:#6A737D;">// [11155111, 84532]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Supported chains: Ethereum Sepolia (<code>11155111</code>), Base Sepolia (<code>84532</code>).</p><hr><h3 id="insufficient-fee-—-transaction-value-too-low" tabindex="-1"><code>INSUFFICIENT_FEE</code> — Transaction value too low <a class="header-anchor" href="#insufficient-fee-—-transaction-value-too-low" aria-label="Permalink to &quot;\`INSUFFICIENT_FEE\` — Transaction value too low&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: execution reverted: InsufficientFee(provided, required)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Fix:</strong> The SDK calculates fees automatically — this usually means the fee changed between estimation and send. Retry the transaction:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// The SDK handles fee calculation internally</span></span>
<span class="line"><span style="color:#6A737D;">// If you&#39;re calling the contract directly, use get_fee():</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> fee</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> hub.</span><span style="color:#B392F0;">get_fee</span><span style="color:#E1E4E8;">(chainId);</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> hub.</span><span style="color:#B392F0;">send_message</span><span style="color:#E1E4E8;">(chainId, target, data, { value: fee });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h3 id="message-stuck-at-pending" tabindex="-1">Message stuck at <code>pending</code> <a class="header-anchor" href="#message-stuck-at-pending" aria-label="Permalink to &quot;Message stuck at \`pending\`&quot;">​</a></h3><p><strong>Symptoms:</strong> <code>watchMessage</code> callback keeps receiving <code>status: &#39;pending&#39;</code> with no progress.</p><p><strong>Causes &amp; fixes:</strong></p><table tabindex="0"><thead><tr><th>Cause</th><th>Fix</th></tr></thead><tbody><tr><td>No active relayer on the network</td><td>Run the relayer node locally (see README)</td></tr><tr><td>Wrong RPC endpoint</td><td>Verify <code>https://sepolia-rollup.arbitrum.io/rpc</code> responds</td></tr><tr><td>Message ID incorrect</td><td>Double-check the ID returned by <code>sendMessage</code></td></tr><tr><td>Message failed silently</td><td>Check <code>get_message(id)</code> directly on the hub contract</td></tr></tbody></table><hr><h3 id="typescript-cannot-find-module-arbilink-sdk" tabindex="-1">TypeScript: <code>Cannot find module &#39;@arbilink/sdk&#39;</code> <a class="header-anchor" href="#typescript-cannot-find-module-arbilink-sdk" aria-label="Permalink to &quot;TypeScript: \`Cannot find module &#39;@arbilink/sdk&#39;\`&quot;">​</a></h3><p><strong>Fix:</strong> Add the package and install:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#9ECBFF;"> add</span><span style="color:#9ECBFF;"> @arbilink/sdk</span><span style="color:#9ECBFF;"> ethers</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>If using pnpm workspaces, verify <code>pnpm-workspace.yaml</code> includes the SDK package:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#85E89D;">packages</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">&#39;packages/*&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h3 id="walletclient-import-error-wagmi" tabindex="-1"><code>WalletClient</code> import error (wagmi) <a class="header-anchor" href="#walletclient-import-error-wagmi" aria-label="Permalink to &quot;\`WalletClient\` import error (wagmi)&quot;">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>Module &#39;&quot;wagmi&quot;&#39; has no exported member &#39;WalletClient&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Fix:</strong> Import <code>WalletClient</code> from <code>viem</code>, not <code>wagmi</code>:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ❌ Wrong</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#F97583;"> type</span><span style="color:#E1E4E8;"> { WalletClient } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;wagmi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ✅ Correct</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#F97583;"> type</span><span style="color:#E1E4E8;"> { WalletClient } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;viem&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h3 id="vite-arbilink-sdk-not-resolving-commonjs-vs-esm" tabindex="-1">Vite: <code>@arbilink/sdk</code> not resolving (CommonJS vs ESM) <a class="header-anchor" href="#vite-arbilink-sdk-not-resolving-commonjs-vs-esm" aria-label="Permalink to &quot;Vite: \`@arbilink/sdk\` not resolving (CommonJS vs ESM)&quot;">​</a></h3><p>If Vite throws errors about CommonJS modules, add an alias in <code>vite.config.ts</code>:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> path </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;path&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#B392F0;"> defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    alias: {</span></span>
<span class="line"><span style="color:#9ECBFF;">      &#39;@arbilink/sdk&#39;</span><span style="color:#E1E4E8;">: path.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(__dirname, </span><span style="color:#9ECBFF;">&#39;../sdk/src/index.ts&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="contract-errors" tabindex="-1">Contract Errors <a class="header-anchor" href="#contract-errors" aria-label="Permalink to &quot;Contract Errors&quot;">​</a></h2><h3 id="receivemessage-reverts-on-destination" tabindex="-1"><code>receiveMessage</code> reverts on destination <a class="header-anchor" href="#receivemessage-reverts-on-destination" aria-label="Permalink to &quot;\`receiveMessage\` reverts on destination&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Revert reason</th><th>Cause</th><th>Fix</th></tr></thead><tbody><tr><td><code>Unauthorized</code></td><td><code>msg.sender</code> is not the registered relayer</td><td>Relayer not approved in receiver contract</td></tr><tr><td><code>Already processed</code></td><td>Duplicate delivery</td><td>Message was already delivered</td></tr><tr><td>Target call reverted</td><td>Your contract&#39;s function reverted</td><td>Debug the target contract independently</td></tr></tbody></table><hr><h3 id="foundry-tests-failing" tabindex="-1">Foundry tests failing <a class="header-anchor" href="#foundry-tests-failing" aria-label="Permalink to &quot;Foundry tests failing&quot;">​</a></h3><p><strong><code>vm.envString</code> not loading <code>.env</code></strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># Load .env in Foundry tests</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#9ECBFF;"> .env</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">forge</span><span style="color:#9ECBFF;"> test</span></span>
<span class="line"><span style="color:#6A737D;"># or</span></span>
<span class="line"><span style="color:#B392F0;">forge</span><span style="color:#9ECBFF;"> test</span><span style="color:#79B8FF;"> --ffi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Contract not found at address</strong>:</p><p>Verify the receiver address in your test matches the deployed contract:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> deployment-info.json</span><span style="color:#F97583;"> |</span><span style="color:#B392F0;"> jq</span><span style="color:#9ECBFF;"> &#39;.receiver_ethereum&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="network-issues" tabindex="-1">Network Issues <a class="header-anchor" href="#network-issues" aria-label="Permalink to &quot;Network Issues&quot;">​</a></h2><h3 id="arbitrum-sepolia-rpc-timeout" tabindex="-1">Arbitrum Sepolia RPC timeout <a class="header-anchor" href="#arbitrum-sepolia-rpc-timeout" aria-label="Permalink to &quot;Arbitrum Sepolia RPC timeout&quot;">​</a></h3><p>Try alternative public endpoints:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>https://sepolia-rollup.arbitrum.io/rpc</span></span>
<span class="line"><span>https://arb-sepolia.g.alchemy.com/v2/YOUR_KEY</span></span>
<span class="line"><span>https://arbitrum-sepolia.blockpi.network/v1/rpc/public</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="transaction-not-found-after-sendmessage" tabindex="-1">Transaction not found after <code>sendMessage</code> <a class="header-anchor" href="#transaction-not-found-after-sendmessage" aria-label="Permalink to &quot;Transaction not found after \`sendMessage\`&quot;">​</a></h3><p>Arbitrum Sepolia can occasionally reorganise. Wait ~30 seconds and retry <code>getMessageStatus</code>.</p><hr><h2 id="still-stuck" tabindex="-1">Still stuck? <a class="header-anchor" href="#still-stuck" aria-label="Permalink to &quot;Still stuck?&quot;">​</a></h2><p>Open an issue at <a href="https://github.com/Martins-O/ArbiLink/issues" target="_blank" rel="noreferrer">github.com/Martins-O/ArbiLink/issues</a> with:</p><ul><li>SDK version (<code>pnpm list @arbilink/sdk</code>)</li><li>Error message + stack trace</li><li>Code snippet that reproduces the issue</li><li>Chain IDs involved</li></ul>`,59)])])}const h=a(r,[["render",t]]);export{b as __pageData,h as default};
