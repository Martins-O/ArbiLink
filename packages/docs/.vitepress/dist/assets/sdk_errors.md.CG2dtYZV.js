import{_ as n,o as a,c as e,ag as l}from"./chunks/framework.DEqXEGcv.js";const y=JSON.parse('{"title":"Errors","description":"","frontmatter":{},"headers":[],"relativePath":"sdk/errors.md","filePath":"sdk/errors.md"}'),r={name:"sdk/errors.md"};function p(o,s,c,t,E,i){return a(),e("div",null,[...s[0]||(s[0]=[l(`<h1 id="errors" tabindex="-1">Errors <a class="header-anchor" href="#errors" aria-label="Permalink to &quot;Errors&quot;">​</a></h1><p>The SDK throws <code>ArbiLinkError</code> for all recoverable errors. Each error has a <code>code</code> field for programmatic handling.</p><h2 id="error-class" tabindex="-1">Error Class <a class="header-anchor" href="#error-class" aria-label="Permalink to &quot;Error Class&quot;">​</a></h2><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ArbiLinkError } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@arbilink/sdk&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#E1E4E8;"> arbiLink.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">({ </span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (err </span><span style="color:#F97583;">instanceof</span><span style="color:#B392F0;"> ArbiLinkError</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`[\${</span><span style="color:#E1E4E8;">err</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">code</span><span style="color:#9ECBFF;">}] \${</span><span style="color:#E1E4E8;">err</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">message</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Details:&#39;</span><span style="color:#E1E4E8;">, err.details);</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Cause:&#39;</span><span style="color:#E1E4E8;">, err.cause);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="error-codes" tabindex="-1">Error Codes <a class="header-anchor" href="#error-codes" aria-label="Permalink to &quot;Error Codes&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Code</th><th>Trigger</th><th>Resolution</th></tr></thead><tbody><tr><td><code>NOT_CONNECTED</code></td><td>Write method called with Provider</td><td>Use a Signer instance</td></tr><tr><td><code>CHAIN_NOT_SUPPORTED</code></td><td><code>chainId</code> not registered in MessageHub</td><td>Use a chain from <code>SUPPORTED_CHAINS</code></td></tr><tr><td><code>INSUFFICIENT_FEE</code></td><td>Transaction value below required fee</td><td>Call <code>calculateFee()</code> first</td></tr><tr><td><code>SEND_FAILED</code></td><td>Transaction reverted during <code>sendMessage</code></td><td>Check gas, fee, and target address</td></tr><tr><td><code>RELAYER_ALREADY_REGISTERED</code></td><td><code>registerRelayer</code> called when already registered</td><td>Call <code>exitRelayer()</code> first</td></tr><tr><td><code>RELAYER_NOT_REGISTERED</code></td><td><code>exitRelayer</code> called on non-relayer address</td><td>Address is not a registered relayer</td></tr><tr><td><code>MESSAGE_NOT_FOUND</code></td><td><code>getMessageStatus</code> for an unknown ID</td><td>Verify the message ID</td></tr><tr><td><code>UNKNOWN</code></td><td>Unexpected contract error</td><td>Check <code>err.cause</code> for the underlying error</td></tr></tbody></table><h2 id="handling-specific-errors" tabindex="-1">Handling Specific Errors <a class="header-anchor" href="#handling-specific-errors" aria-label="Permalink to &quot;Handling Specific Errors&quot;">​</a></h2><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ArbiLink, ArbiLinkError } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@arbilink/sdk&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> safeSend</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">arbiLink</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ArbiLink</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">params</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> SendMessageParams</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> arbiLink.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">(params);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">(err </span><span style="color:#F97583;">instanceof</span><span style="color:#B392F0;"> ArbiLinkError</span><span style="color:#E1E4E8;">)) </span><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">    switch</span><span style="color:#E1E4E8;"> (err.code) {</span></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;NOT_CONNECTED&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Connect your wallet before sending.&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;CHAIN_NOT_SUPPORTED&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`Chain \${</span><span style="color:#E1E4E8;">params</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">chainId</span><span style="color:#9ECBFF;">} is not supported.\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Supported chains:&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">SUPPORTED_CHAINS</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">c</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> c.chainId));</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;INSUFFICIENT_FEE&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Fee too low — recalculating…&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">        const</span><span style="color:#79B8FF;"> fee</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> arbiLink.</span><span style="color:#B392F0;">calculateFee</span><span style="color:#E1E4E8;">(params.chainId);</span></span>
<span class="line"><span style="color:#6A737D;">        // Retry with correct fee (SDK handles this automatically)</span></span>
<span class="line"><span style="color:#F97583;">        return</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> arbiLink.</span><span style="color:#B392F0;">sendMessage</span><span style="color:#E1E4E8;">(params);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">      default</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`Unexpected error [\${</span><span style="color:#E1E4E8;">err</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">code</span><span style="color:#9ECBFF;">}]:\`</span><span style="color:#E1E4E8;">, err.message);</span></span>
<span class="line"><span style="color:#F97583;">        throw</span><span style="color:#E1E4E8;"> err;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="contract-errors" tabindex="-1">Contract Errors <a class="header-anchor" href="#contract-errors" aria-label="Permalink to &quot;Contract Errors&quot;">​</a></h2><p>The underlying <code>MessageHub</code> contract defines these revert errors:</p><div class="language-solidity line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> ChainNotSupported</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">uint256</span><span style="color:#E1E4E8;"> chainId);</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> InsufficientFee</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">uint256</span><span style="color:#E1E4E8;"> provided, </span><span style="color:#79B8FF;">uint256</span><span style="color:#E1E4E8;"> required);</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> MessageAlreadyProcessed</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">uint256</span><span style="color:#E1E4E8;"> messageId);</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> NotAuthorized</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> RelayerNotActive</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">address</span><span style="color:#E1E4E8;"> relayer);</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> RelayerAlreadyRegistered</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">address</span><span style="color:#E1E4E8;"> relayer);</span></span>
<span class="line"><span style="color:#F97583;">error</span><span style="color:#B392F0;"> ChallengeWindowActive</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">uint256</span><span style="color:#E1E4E8;"> deadline);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>These are mapped to <code>ArbiLinkError</code> codes automatically by the SDK. You can access the raw contract error via <code>err.cause</code>.</p>`,12)])])}const b=n(r,[["render",p]]);export{y as __pageData,b as default};
